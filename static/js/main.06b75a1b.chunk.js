(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1171:function(e,t,a){e.exports=a.p+"static/media/analytics.a203d5f4.svg"},1172:function(e,t,a){e.exports=a.p+"static/media/dispatching.7a07babb.svg"},1205:function(e,t,a){},1206:function(e,t,a){},1207:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),i=a.n(o),c=a(32),s=a(30),l=a(104),u=a(404),m=a(408),d=(a(443),a(18)),h=a(52),p={identityPoolId:"us-west-2:114badde-4b86-4c5d-a671-837a60c3cbb1",region:"us-west-2",userPoolId:"us-west-2_Ua8aBxkIu",clientId:"7mj4lsl3m2kpsqifctr9k98i55",endpointAddress:"a2o8vhh9dxnl69-ats.iot.us-west-2.amazonaws.com",restApi:"https://vvup9clsk5.execute-api.us-west-2.amazonaws.com/api"};var g="LOG_IN",b="LOG_OUT",f="LOG_IN_FAILURE",v="WRITE_CRED_TO_STORE";function E(e,t){return function(n){(function(e){return new Promise(function(t,n){var r=a(22),o=a(821),i=a(1208),c={Username:e.username.toLowerCase(),Password:e.password},s={UserPoolId:p.userPoolId,ClientId:p.clientId};console.log(s);var l=new i.CognitoUserPool(s),u={Username:c.Username,Pool:l},m=new i.AuthenticationDetails(c),d=new i.CognitoUser(u);d.authenticateUser(m,{onSuccess:function(e){console.log("authenticateUser:onSuccess");var a=e.getIdToken().getJwtToken(),i=e.getAccessToken().getJwtToken(),c="cognito-idp."+p.region+".amazonaws.com/"+p.userPoolId;r.config.update({region:p.region}),r.config.credentials=new r.CognitoIdentityCredentials({IdentityPoolId:p.identityPoolId,Logins:Object(h.a)({},c,a)}),r.config.credentials.get(function(e){if(e)console.log("CONFIGERROR"),r.config.credentials.clearCachedId(),console.error(e),n(e);else{var o={endpoint:"iot."+p.region+".amazonaws.com",region:p.region,accessKeyId:r.config.credentials.accessKeyId,accessToken:i,idToken:a,secretAccessKey:r.config.credentials.secretAccessKey,sessionToken:r.config.credentials.sessionToken};t({status:!0,code:"",credentials:o})}}),o("form")[0].reset()},onFailure:function(e){console.log(e),console.log("AWS AUTH ERROR"),o(".box").addClass("shake").delay(1e3).queue(function(){o(".box").removeClass("shake"),o("input[name='password']").focus().select(),o(".box").dequeue()}),t({status:!1,code:"invalid_login_or_password",credentials:{}})},newPasswordRequired:function(e,t){console.log("user: ",e),console.log("required: ",t),delete e.email_verified,delete e.phone_number_verified;var a=prompt("Input new password","");e.name="name",e.family_name="surname";var r=e;console.log(e),d.completeNewPasswordChallenge(a,r,{onSuccess:function(e){console.log("NEW PASSWORD COMPLETED: "),console.log(e)},onFailure:function(e){console.log(e),n(e)}}),r=e}})})})(e).then(function(a){a.status?(n({type:g,payload:{name:e.username,credentials:a.credentials}}),t()):n({type:f,payload:{errorMsg:a.code},error:!0})}).catch(function(e){console.log("Promise error:",e),n({type:f,payload:{errorMsg:e},error:!0})})}}var y=a(214),w=new y.a,C={user:null,errorMsg:""},j=a(21),x=a.n(j),O=a(42),S="ADDRESS_LIST_FETCH";var k={list:null,listPending:!1,listError:null},N="GROUPS_LIST_FETCH";var A={list:null,listPending:!1,listError:null},I="EVENTS_LIST_FETCH";var L={list:null,listPending:!1,listError:null},_=a(22),P=a(195),T=a(213);function D(e,t){return new Promise(function(a,n){var r={datasetName:t};e.getDatasetContent(r,function(e,t){e?n(e):a(t)})})}var R="THING_LIST_FETCH";var H={data:null,dataPending:!1,dataError:null},M=a(409),G=a.n(M),V="ANALYST_DATA_FETCH";var W={data:null,dataPending:!1,dataError:null,total:{},groups:[]},F="DISPATCH_FILTER_PARAMS_SET";var B={filter:{params:{address:null,noPower:!0,noConnection2h:!1,noConnection24h:!1,noEthernet:!1,lowGsm:!1,statusNormal:!1,statusAlmin:!1,statusAlmaj:!1,activeEthernet:!1,activeGsm:!1,noConnection:!1}}},z=Object(l.c)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return w.remove("credentials"),w.set("credentials",Object(d.a)({},t.payload.credentials,{name:t.payload.name}),{path:"/",maxAge:600}),Object(d.a)({},e,{user:{name:t.payload.name,credentials:t.payload.credentials},errorMsg:""});case b:return w.remove("credentials"),Object(d.a)({},e,{user:null,errorMsg:""});case v:return Object(d.a)({},e,{user:{name:t.payload.name,credentials:t.payload.credentials}});case f:return Object(d.a)({},e,{errorMsg:t.payload.errorMsg});default:return e}},addressList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:var a=t.status,n=t.payload;return Object(d.a)({},e,{list:"success"===a?n:null,listPending:"pending"===a,listError:"failure"===a?n:null});default:return e}},groupsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:var a=t.status,n=t.payload;return Object(d.a)({},e,{list:"success"===a?n:null,listPending:"pending"===a,listError:"failure"===a?n:null});default:return e}},eventList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:var a=t.status,n=t.payload;return Object(d.a)({},e,{list:"success"===a?n:null,listPending:"pending"===a,listError:"failure"===a?n:null});default:return e}},thingList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:var a=t.status,n=t.payload;return Object(d.a)({},e,{data:"success"===a?n:null,dataPending:"pending"===a,dataError:"failure"===a?n:null});default:return e}},analyst:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:var a=t.status,n=t.payload;switch(a){case"pending":return Object(d.a)({},e,{dataPending:!0});case"success":for(var r=n.activeThings,o=n.dataset,i={count:r.things.length||0,statusNormalCount:0,statusAlminCount:0,statusAlmajCount:0,noConnectionCount:0,errorCount:0,errorPercentage:0},c=Object.values(o.reduce(function(e,t){var a=e[t.group_id]=e[t.group_id]||{id:t.group_id,thingById:{},count:0,statusNormalCount:0,statusAlminCount:0,statusAlmajCount:0,noConnectionCount:0,errorCount:0,errorPercentage:0};if(a.thingById[t.device]){var n=a.thingById[t.device];parseInt(t.__time)>=parseInt(n.__time)&&(a.thingById[t.device]=t)}else a.thingById[t.device]=t;return e},{})),s=new Date,l=0,u=c;l<u.length;l++){for(var m=u[l],h=0,p=Object.values(m.thingById);h<p.length;h++){var g=p[h];if(m.count++,s-new Date(Number("".concat(g.__time,"000")))>72e5)i.noConnectionCount++,m.noConnectionCount++,i.errorCount++,m.errorCount++;else switch(g.status){case"normal":i.statusNormalCount++,m.statusNormalCount++;break;case"almin":i.statusAlminCount++,m.statusAlminCount++,i.errorCount++,m.errorCount++;break;case"almaj":i.statusAlmajCount++,m.statusAlmajCount++,i.errorCount++,m.errorCount++}}m.errorPercentage=Math.round(m.errorCount/m.count*100)}return i.errorPercentage=Math.round(i.errorCount/i.count*100),Object(d.a)({},e,{dataPending:!1,data:n,total:i,groups:c});case"failure":return Object(d.a)({},e,{dataPending:!1,dataError:n})}return e;default:return e}},dispatch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:var a=t.params;return Object(d.a)({},e,{filter:Object(d.a)({},e.filter,{params:a})});default:return e}}}),U=a(77),$=a(424);var q=Object(s.b)(function(e){return console.log("PrivateRoute state:",e),{isAuth:e.session.user}})(function(e){var t=e.component,a=Object($.a)(e,["component"]);return console.log("PrivateRoute rest:",t),r.a.createElement(U.b,Object.assign({},a,{render:function(e){return a.isAuth?r.a.createElement(t,e):r.a.createElement(U.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),K=a(8),Y=a(13),J=a(11),X=a(9),Z=a(12),Q=new y.a,ee=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(J.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={redirectToPreviousRoute:!1,username:"",password:""},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.logIn({username:n,password:r},function(){a.setState({redirectToPreviousRoute:!0})})},a.handleChange=function(e){var t=e.currentTarget.value,n=e.currentTarget.dataset.fieldName;a.setState(function(e){return Object(d.a)({},e,Object(h.a)({},n,t))})},a}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Q.get("credentials");if(t&&t.name&&t.accessKeyId&&t.endpoint&&t.region&&t.secretAccessKey&&t.accessToken&&t.idToken&&t.sessionToken){var a={name:t.name,credentials:{accessKeyId:t.accessKeyId,accessToken:t.accessToken,idToken:t.idToken,endpoint:t.endpoint,region:t.region,secretAccessKey:t.secretAccessKey,sessionToken:t.sessionToken}};this.props.writeCred(a,function(){e.setState({redirectToPreviousRoute:!0})})}}},{key:"render",value:function(){var e=this.props,t=e.location,a=e.errorMsg,n=(t.state||{from:{pathname:"/ws"}}).from,o=this.state,i=o.username,c=o.password;return o.redirectToPreviousRoute?r.a.createElement(U.a,{to:n}):r.a.createElement("div",null,a&&r.a.createElement("p",null,a),r.a.createElement("form",{className:"box",onSubmit:this.handleSubmit},r.a.createElement("h1",null,"ST-EYE"),r.a.createElement("input",{"data-field-name":"username",type:"text",onChange:this.handleChange,placeholder:"Username",value:i}),r.a.createElement("input",{"data-field-name":"password",type:"password",onChange:this.handleChange,placeholder:"Password",value:c}),r.a.createElement("button",{type:"submit"},"Login")))}}]),t}(r.a.Component),te=Object(s.b)(function(e){return{errorMsg:e.session.errorMsg,timeOut:e.session.timeOut}},function(e){return{logIn:function(t,a){return e(E(t,a))},writeCred:function(t,a){return e(function(e,t){return function(a){a({type:v,payload:{name:e.name,credentials:e.credentials}}),t()}}(t,a))}}})(ee),ae=a(411),ne=a.n(ae),re=function(e){var t=e.to,a=e.label;return r.a.createElement(c.b,{to:t},r.a.createElement(ne.a,{variant:"raised",color:"primary"},r.a.createElement("span",null,a)))},oe=function(e){var t=e.user;if(t)return t.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"username"},t.name)):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{className:"loginLink",to:"/login"},r.a.createElement("div",{className:"username"},"\u0412\u043e\u0439\u0442\u0438")))},ie=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(J.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={loggedIn:null},a}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement(oe,{user:Object(d.a)({},this.props.user)})}}]),t}(r.a.Component),ce=Object(s.b)(function(e){return{user:e.session.user}},function(e){return{}})(ie),se=a(276),le=a(1254),ue=a(403),me=a(1238),de=a(1209),he=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.onFetchData)()}},{key:"render",value:function(){var e=this.props.classes,t=this.props.groupListComponent;return r.a.createElement(le.a,{className:e.root,display:"flex",flexGrow:1},r.a.createElement(ue.a,{component:le.a,flexGrow:1,display:"flex",flexDirection:"column",m:2},r.a.createElement(me.a,null,r.a.createElement(de.a,{variant:"h6"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f")),r.a.createElement(t,null)))}}]),t}(r.a.PureComponent),pe=Object(se.a)(function(e){return{root:{}}})(he),ge=a(125),be=a(126),fe=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.index,a=e.style,n=e.data,o=(n=void 0===n?{}:n).classes,i=n.total,s=n.groups;if(0===t)return r.a.createElement("div",{className:"".concat(o.item),style:a},r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_title)},"\u0412\u0441\u0435\u0433\u043e"),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_count),to:"/dispatch"},i.count),r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_error)},i.errorPercentage,"%"),r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_service)}),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_status),to:"/dispatch?noConnection=true"},i.noConnectionCount),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_status),to:"/dispatch?statusNormal=true"},i.statusNormalCount),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_status),to:"/dispatch?statusAlmin=true"},i.statusAlminCount),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_status),to:"/dispatch?statusAlmaj=true"},i.statusAlmajCount));var l=s[t-1];return r.a.createElement("div",{className:"".concat(o.item),style:a},r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_title)},"\u0413\u0440\u0443\u043f\u043f\u0430 ",l.id),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_count),to:"/dispatch?address=".concat(l.id)},l.count),r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_error)},l.errorPercentage,"%"),r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_service)}),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_status),to:"/dispatch?address=".concat(l.id,"&noConnection=true")},l.noConnectionCount),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_status),to:"/dispatch?address=".concat(l.id,"&statusNormal=true")},l.statusNormalCount),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_status),to:"/dispatch?address=".concat(l.id,"&statusAlmin=true")},l.statusAlminCount),r.a.createElement(c.b,{className:"".concat(o.itemColumn," ").concat(o.itemColumn_status),to:"/dispatch?address=".concat(l.id,"&statusAlmaj=true")},l.statusAlmajCount))}}]),t}(r.a.PureComponent),ve=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.total,n=e.groups;return n?r.a.createElement(le.a,{flexGrow:1,display:"flex",flexDirection:"column"},r.a.createElement(le.a,null,r.a.createElement("div",{className:"".concat(t.head)},r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_title)}),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_count)},"\u0412\u0441\u0435\u0433\u043e"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_error)},"% \u0441 \u043d\u0435\u043f\u043e\u043b\u0430\u0434\u043a\u0430\u043c\u0438"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_service)},"\u0421\u0435\u0440\u0432\u0438\u0441"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_status)},"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_status)},"\u041d\u043e\u0440\u043c\u0430"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_status)},"\u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_status)},"\u0410\u0432\u0430\u0440\u0438\u044f"))),r.a.createElement(le.a,{flexGrow:1,position:"relative"},r.a.createElement(be.a,null,function(e){var o=e.width,i=e.height;return r.a.createElement(ge.a,{className:t.list,width:o,height:i,itemCount:n.length+1,itemSize:49,overscanCount:5,itemData:{classes:t,total:a,groups:n}},fe)}))):null}}]),t}(r.a.PureComponent),Ee=Object(se.a)(function(e){return{root:{},head:{display:"flex",flexWrap:"nowrap",alignItems:"start",WebkitBoxOrient:"horizontal",WebkitBoxDirection:"normal",WebkitBoxAlign:"start"},item:{display:"flex",flexWrap:"nowrap",alignItems:"start",WebkitBoxOrient:"horizontal",WebkitBoxDirection:"normal",WebkitBoxAlign:"start",boxShadow:"inset 0 1px 0 0 rgba(0, 0, 0, 0.12)","&:last-child":{boxShadow:"inset 0 1px 0 0 rgba(0, 0, 0, 0.12), 0 1px 0 0 rgba(0, 0, 0, 0.12)"}},itemColumn:{display:"flex",alignItems:"center",boxSizing:"border-box",minWidth:0,overflow:"hidden",height:48,paddingLeft:12,paddingRight:12,lineHeight:"16px",fontSize:"14px","&:first-child":{paddingLeft:e.spacing(3)},"&:last-child":{paddingRight:e.spacing(3)}},itemColumn_title:{flex:"2 2 25%"},itemColumn_count:{flex:"1 1 10%",whiteSpace:"nowrap",justifyContent:"flex-end","$item &":{textDecoration:"none",color:e.palette.secondary.main},"$item &:hover":{textDecoration:"underline",color:e.palette.primary.main}},itemColumn_error:{flex:"1 1 15%",whiteSpace:"nowrap",justifyContent:"flex-end"},itemColumn_service:{flex:"1 1 10%",whiteSpace:"nowrap",justifyContent:"flex-end"},itemColumn_status:{flex:"2 2 10%",whiteSpace:"nowrap",justifyContent:"flex-end","$item &":{textDecoration:"none",color:e.palette.secondary.main},"$item &:hover":{textDecoration:"underline",color:e.palette.primary.main}}}})(ve),ye=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement(Ee,this.props)}}]),t}(r.a.PureComponent),we=Object(s.b)(function(e){return{groups:e.analyst.groups,total:e.analyst.total}},function(e){return{}})(ye),Ce=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement(pe,Object.assign({groupListComponent:we},this.props))}}]),t}(r.a.Component),je=Object(s.b)(function(e){return{}},function(e){return{onFetchData:function(t){return e(function(){var e=Object(O.a)(x.a.mark(function e(t,a){var n,r,o,i,c,s,l,u,m,d;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:V,status:"pending"}),e.prev=1,n=a(),r=n.session.user,_.config.update({region:p.region}),o={host:"iot.us-west-2.amazonaws.com",method:"GET",headers:{auth:r.credentials.idToken}},G.a.sign(o,{accessKeyId:r.credentials.accessKeyId,secretAccessKey:r.credentials.secretAccessKey,sessionToken:r.credentials.sessionToken}),e.next=8,fetch(p.restApi+"/things/active",o);case 8:return i=e.sent,e.next=11,i.json();case 11:return c=e.sent,s="cognito-idp."+p.region+".amazonaws.com/"+p.userPoolId,_.config.credentials=new _.CognitoIdentityCredentials({IdentityPoolId:p.identityPoolId,Logins:Object(h.a)({},s,r.credentials.idToken)}),new _.Iot(r.credentials),l=new _.IoTAnalytics,e.next=18,D(l,"st_eye_dataset_laststatus");case 18:return u=e.sent,m=u.entries[0].dataURI,e.next=22,P(m);case 22:d=e.sent,t({type:V,status:"success",payload:{activeThings:c,dataset:d}}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),t({type:V,status:"failure",payload:e.t0});case 29:case"end":return e.stop()}},e,null,[[1,26]])}));return function(t,a){return e.apply(this,arguments)}}())}}})(Ce),xe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{id:"loading",alt:"loading...",src:"https://avatanplus.com/files/resources/original/59c802178c1fe15eb5482c16.png"}))},Oe=function(e){var t=e.user;if(t.groups){var n=0;t.groups.map(function(e){return r.a.createElement(re,{key:n++,to:e,label:e})})}return r.a.createElement("div",{className:"news-list"},t.groups?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"selection_header"},r.a.createElement("h1",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e")),r.a.createElement("div",{className:"selection_container"},r.a.createElement("div",{className:"wspanel"},r.a.createElement(c.c,{to:"/analyst"},r.a.createElement("div",null,r.a.createElement("img",{src:a(1171),alt:"analytics_img"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"wspanel_title"},r.a.createElement("h3",null,"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c"),r.a.createElement("span",{className:"stitle"},".")))),r.a.createElement("div",{className:"wspanel"},r.a.createElement(c.c,{to:"/dispatch"},r.a.createElement("div",null,r.a.createElement("img",{src:a(1172),alt:"dispatching_img"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"wspanel_title"},r.a.createElement("h3",null,"\u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440"),r.a.createElement("span",{className:"stitle"},".")))))):r.a.createElement(xe,null))},Se=a(22),ke=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(J.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={groups:null},a}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"getUserGroups",value:function(){var e=this;return new Promise(function(t,a){var n={Username:e.props.user.name,UserPoolId:p.userPoolId},r="cognito-idp."+p.region+".amazonaws.com/"+p.userPoolId;Se.config.update({region:p.region}),Se.config.credentials=new Se.CognitoIdentityCredentials({IdentityPoolId:p.identityPoolId,Logins:Object(h.a)({},r,e.props.user.credentials.idToken)}),Se.config.credentials.get(function(e){e?(console.log("CONFIGERROR"),Se.config.credentials.clearCachedId(),console.error(e),a(e)):(new Se.CognitoIdentityServiceProvider).adminListGroupsForUser(n,function(e,n){e&&(console.log(e,e.stack),a(e)),t(n)})})})}},{key:"componentDidMount",value:function(){var e=this;this._asyncRequest=this.getUserGroups().then(function(t){e._asyncRequest=null,e.setState({groups:t.Groups.map(function(e){return e.GroupName})})})}},{key:"render",value:function(){return console.log("WsSelectContainer state:",this.state),console.log("WsSelectContainer props:",this.props),this.state.groups?r.a.createElement(Oe,{user:Object(d.a)({},this.props.user,{groups:this.state.groups})}):r.a.createElement(xe,null)}}]),t}(r.a.Component),Ne=Object(s.b)(function(e){return{user:e.session.user}})(ke),Ae=a(1260),Ie=a(1256),Le=a(413),_e=a.n(Le),Pe=a(1240),Te=a(1241),De=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.addressById;return a?r.a.createElement("span",{className:t.root},r.a.createElement("span",null,a.device),"@",a.address_id&&n&&n[a.address_id]?r.a.createElement("span",null,n[a.address_id].name.S):r.a.createElement("span",null,"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")):null}}]),t}(r.a.PureComponent),Re=Object(se.a)(function(e){return{root:{}}})(De),He=a(414),Me=a.n(He),Ge=a(425),Ve=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(J.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={thing:null},a}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props,n=a.filterComponent,o=a.eventListComponent,i=a.thingListComponent,c=a.thingDetailsComponent;return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{className:t.root,display:"flex",flexGrow:1},r.a.createElement(n,null),r.a.createElement(le.a,{flexGrow:1,display:"flex",flexDirection:"column",pt:2,pb:2},r.a.createElement(ue.a,{component:le.a,height:"62%",display:"flex",flexDirection:"column",mb:2},r.a.createElement(me.a,null,r.a.createElement(de.a,{variant:"h6"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f")),r.a.createElement(i,{onClickThing:function(t){e.setState({thing:t})}})),r.a.createElement(ue.a,{component:le.a,flexGrow:1,display:"flex",flexDirection:"column"},r.a.createElement(me.a,null,r.a.createElement(de.a,{variant:"h6"},"\u0416\u0443\u0440\u043d\u0430\u043b \u0441\u043e\u0431\u044b\u0442\u0438\u0439"),r.a.createElement("div",null,r.a.createElement(Ae.a,{className:t.chip,label:"\u0412\u0441\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),r.a.createElement(Ae.a,{className:t.chip,label:"\u0421\u0432\u044f\u0437\u044c"}),r.a.createElement(Ae.a,{className:t.chip,label:"\u041e\u0445\u0440\u0430\u043d\u0430"}),r.a.createElement(Ae.a,{className:t.chip,label:"\u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435"}))),r.a.createElement(le.a,{flexGrow:1,position:"relative"},r.a.createElement(o,null)))),r.a.createElement(Ie.a,{classes:{container:t.dialogContainer,paper:t.dialogPaper},open:!!this.state.thing,onClose:function(){e.setState({thing:null})},maxWidth:"md",fullWidth:!0},this.state.thing&&r.a.createElement(r.a.Fragment,null,r.a.createElement(_e.a,{className:t.dialogBar,position:"static",color:"primary",elevation:0},r.a.createElement(Pe.a,{maxWidth:!1},r.a.createElement(me.a,{disableGutters:!0},r.a.createElement(de.a,{variant:"h6",style:{flexGrow:1}},"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440 ",r.a.createElement(Re,{thing:this.state.thing})),r.a.createElement(Ge.a,{color:"inherit",edge:"end",onClick:function(){e.setState({thing:null})}},r.a.createElement(Me.a,{color:"inherit"}))))),r.a.createElement(Te.a,{className:t.dialogContent},r.a.createElement(Pe.a,{maxWidth:!1},r.a.createElement(c,{thing:this.state.thing})))))))}}]),t}(r.a.Component),We=Object(se.a)(function(e){return{root:{},chip:{marginLeft:12},dialogContainer:{alignItems:"start"},dialogPaper:{marginTop:72},dialogBar:{backgroundColor:"rgba(25,25,25,1)"},dialogContent:{padding:e.spacing(3,0)},dialogActions:{padding:e.spacing(1),justifyContent:"flex-start"},dialogAction:{padding:e.spacing(1,3)}}})(Ve),Fe=a(1244),Be=a(1242),ze=a(1243),Ue=a(1257),$e=a(1255),qe=a(283),Ke={address:null,noPower:!1,noConnection2h:!1,noConnection24h:!1,noEthernet:!1,lowGsm:!1,activeEthernet:!1,activeGsm:!1,noConnection:!1,statusNormal:!1,statusAlmin:!1,statusAlmaj:!1},Ye=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(J.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={params:Object(d.a)({},Ke)},a.handleChangeAddress=function(e){var t=e.target.value;a.setState({params:Object(d.a)({},a.state.params,{address:t})})},a.handleChangeCheckbox=function(e){var t=e.target,n=t.value,r=t.checked;a.setState({params:Object(d.a)({},a.state.params,Object(h.a)({},n,r))})},a.handleSubmit=function(){var e=!1,t=[],n=Object.entries(a.state.params).reduce(function(a,n){var r=Object(T.a)(n,2),o=r[0],i=r[1];return!e&&i&&(e=!0),t.push(o),a[o]=i||void 0,a},{}),r=a.props,o=r.history,i=r.location;if(e){var c=Object(qe.stringify)(n,{sort:function(e,a){return t.indexOf(e)-t.indexOf(a)}});o.push("".concat(i.pathname,"?").concat(c))}else o.push(i.pathname);a.props.setParams(a.state.params)},a}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location.search,a=e.setParams,n=Object(qe.parse)(t);a(Object.keys(Ke).reduce(function(e,t){switch(t){case"address":e[t]=n[t]||null;break;default:e[t]=!!n[t]}return n},{}));var r=this.props,o=r.user;(0,r.fetchGroupsList)(o)}},{key:"componentDidUpdate",value:function(e,t,a){if(e.params!==this.props.params){var n=this.props.params;this.setState({params:n})}}},{key:"isSubmitted",value:function(){return JSON.stringify(this.state.params)===JSON.stringify(this.props.params)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.groupsList;return r.a.createElement("div",{className:t.root},r.a.createElement(le.a,{position:"absolute",style:{top:0,right:0,bottom:-1,left:0,overflowY:"auto"},p:2},r.a.createElement(de.a,{className:t.heading,variant:"h6",paragraph:!0},"\u0424\u0438\u043b\u044c\u0442\u0440 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),r.a.createElement(de.a,{className:t.subtitle,variant:"subtitle1",color:"primary"},"\u0410\u0434\u0440\u0435\u0441"),r.a.createElement($e.a,{className:t.address,classes:{select:t.addressSelect},value:this.state.params.address||"",onChange:this.handleChangeAddress,fullWidth:!0},r.a.createElement("option",{value:"",style:{color:"#aaa"}},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"),!!a&&!!a.Items&&a.Items.map(function(e){return r.a.createElement("option",{key:e.id.N,value:e.id.N},e.name.S)})),r.a.createElement(de.a,{className:t.subtitle,variant:"subtitle1",color:"primary"},"\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435"),r.a.createElement(Be.a,null,r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u041d\u043e\u0440\u043c\u0430",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"statusNormal",checked:this.state.params.statusNormal,onChange:this.handleChangeCheckbox})}),r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"statusAlmin",checked:this.state.params.statusAlmin,onChange:this.handleChangeCheckbox})}),r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u0410\u0432\u0430\u0440\u0438\u044f",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"statusAlmaj",checked:this.state.params.statusAlmaj,onChange:this.handleChangeCheckbox})}),r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"noConnection",checked:this.state.params.noConnection,onChange:this.handleChangeCheckbox})})),r.a.createElement(de.a,{className:t.subtitle,variant:"subtitle1",color:"primary"},"\u0421\u0432\u044f\u0437\u044c"),r.a.createElement(Be.a,null,r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u0430\u043d\u0430\u043b Ethernet",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"activeEthernet",checked:this.state.params.activeEthernet,onChange:this.handleChangeCheckbox})}),r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u0430\u043d\u0430\u043b GSM",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"activeGsm",checked:this.state.params.activeGsm,onChange:this.handleChangeCheckbox})}),r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438 \u0431\u043e\u043b\u0435\u0435 2 \u0447.",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"noConnection2h",checked:this.state.params.noConnection2h,onChange:this.handleChangeCheckbox})}),r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438 \u0431\u043e\u043b\u0435\u0435 24 \u0447.",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"noConnection24h",checked:this.state.params.noConnection24h,onChange:this.handleChangeCheckbox})}),r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d Ethernet",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"noEthernet",checked:this.state.params.noEthernet,onChange:this.handleChangeCheckbox})}),r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u041d\u0438\u0437\u043a\u0438\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u0438\u0435\u043c\u0430 GSM",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"lowGsm",checked:this.state.params.lowGsm,onChange:this.handleChangeCheckbox})})),r.a.createElement(de.a,{className:t.subtitle,variant:"subtitle1",color:"primary"},"\u0414\u0440\u0443\u0433\u043e\u0435"),r.a.createElement(Be.a,null,r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043f\u0438\u0442\u0430\u043d\u0438\u0435",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary",value:"noPower",checked:this.state.params.noPower,onChange:this.handleChangeCheckbox})}),r.a.createElement(ze.a,{classes:{root:t.checkboxControl,label:t.checkboxControlLabel},label:"\u0410\u043d\u043e\u043c\u0430\u043b\u0438\u0438 \u0432 \u0434\u0430\u043d\u043d\u044b\u0445",control:r.a.createElement(Ue.a,{classes:{root:t.checkbox},color:"primary"})})),r.a.createElement(Fe.a,{className:t.submit,variant:this.isSubmitted()?"outlined":"contained",color:"secondary",onClick:this.handleSubmit,fullWidth:!0},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c")))}}]),t}(r.a.PureComponent),Je=Object(U.g)(Object(se.a)(function(e){return{root:{position:"relative",width:"15%",minWidth:240,margin:e.spacing(2),color:"#fff",background:"rgba(25,25,25,1)",borderRadius:e.shape.borderRadius,boxShadow:"1px 1px 2px rgba(25,25,25,.16)"},heading:{},subtitle:{marginTop:e.spacing(2),fontWeight:700},address:{marginTop:e.spacing(1.5),marginBottom:e.spacing(1),backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,"&::before":{borderBottomColor:"transparent !important"}},addressSelect:{padding:e.spacing(1,3,1,1.5)},checkboxControl:{display:"flex",alignItems:"center"},checkboxControlLabel:Object(d.a)({},e.typography.body2,{fontSize:"12px",paddingTop:2}),checkbox:{color:e.palette.primary.main},submit:{marginTop:e.spacing(2.5)}}})(Ye)),Xe=Object(s.b)(function(e){return{user:e.session.user,params:e.dispatch.filter.params,addressList:e.addressList.list,addressListPending:e.addressList.listPending,addressListError:e.addressList.listError,groupsList:e.groupsList.list,groupsListPending:e.groupsList.listPending,groupsListError:e.groupsList.listError}},function(e){return{setParams:function(t){return e(function(e){return function(t){t({type:F,params:e})}}(t))},fetchGroupsList:function(t){return e(function(){var e=Object(O.a)(x.a.mark(function e(t){var a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:N,status:"pending"}),e.next=3,fetch(p.restApi+"/groups");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,a.ok?t({type:N,status:"success",payload:n}):t({type:N,status:"failure",payload:n});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}})(Je),Ze=a(79),Qe=a.n(Ze),et=a(65),tt=a.n(et),at=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.index,a=e.style,n=e.data,o=(n=void 0===n?{}:n).classes,i=n.list,c=(n.addressById,n.onClickThing,i.Items[t]);return r.a.createElement("div",{className:o.item,style:a},r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_level)},c.level?"I"===c.level.S?r.a.createElement(Qe.a,{className:o.itemIcon,style:{color:"rgb(46,204,113)"}}):"W"===c.level.S?r.a.createElement(Qe.a,{className:o.itemIcon,style:{color:"rgb(252,118,0)"}}):"U"===c.level.S?r.a.createElement(Qe.a,{className:o.itemIcon,style:{color:"rgb(232,15,15)"}}):r.a.createElement(Qe.a,{className:o.itemIcon,color:"action"}):r.a.createElement(Qe.a,{className:o.itemIcon,color:"action"})),r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_device)},c.device.S),r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_message)},c.message.S),r.a.createElement("div",{className:"".concat(o.itemColumn," ").concat(o.itemColumn_time)},tt()(Number(c.time.N)).format("DD.MM.YY HH:mm")))}}]),t}(r.a.PureComponent),nt=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(J.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=(e.user,e.list),n=e.onClickThing;return a?r.a.createElement(be.a,null,function(e){var o=e.width,i=e.height;return r.a.createElement(ge.a,{className:t.list,width:o,height:i,itemCount:a.Items.length,itemSize:48,overscanCount:1,itemData:{classes:t,list:a,onClickThing:n}},at)}):null}}]),t}(r.a.PureComponent),rt=Object(se.a)(function(e){return{root:{},item:{display:"flex",flexWrap:"nowrap",alignItems:"start",WebkitBoxOrient:"horizontal",WebkitBoxDirection:"normal",WebkitBoxAlign:"start",boxShadow:"inset 0 1px 0 0 rgba(0, 0, 0, 0.12)","&:last-child":{boxShadow:"inset 0 1px 0 0 rgba(0, 0, 0, 0.12), 0 1px 0 0 rgba(0, 0, 0, 0.12)"}},itemColumn:{display:"flex",alignItems:"center",boxSizing:"border-box",minWidth:0,overflow:"hidden",height:48,paddingLeft:12,paddingRight:12,lineHeight:"16px",fontSize:"14px","&:first-child":{paddingLeft:e.spacing(3)}},itemColumn_level:{flex:"0 0 ".concat(e.spacing(3)+24+e.spacing(3),"px"),whiteSpace:"nowrap"},itemColumn_device:{flex:"0 1 20%"},itemColumn_message:{flex:"1 1 40%"},itemColumn_time:{},itemIcon:{width:16,height:16,marginLeft:4}}})(nt),ot=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchEventList()}},{key:"render",value:function(){return r.a.createElement(rt,this.props)}}]),t}(r.a.PureComponent),it=Object(s.b)(function(e){return{user:e.session.user,list:e.eventList.list,listPending:e.eventList.listPending,listError:e.eventList.listError}},function(e){return{fetchEventList:function(t){return e(function(){var e=Object(O.a)(x.a.mark(function e(t){var a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:I,status:"pending"}),e.next=3,fetch(p.restApi+"/log");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,a.ok?t({type:I,status:"success",payload:n}):t({type:I,status:"failure",payload:n});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}})(ot),ct=a(207),st=a.n(ct),lt=a(208),ut=a.n(lt),mt=a(209),dt=a.n(mt),ht=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"isDisconnected",value:function(){var e,t=this.props,a=t.thing,n=t.thingShadow;return e=n?new Date(Number("".concat(n.state.reported.msgtime,"000"))):new Date(Number("".concat(a.msgtime,"000"))),new Date-e>72e5}},{key:"getStatus",value:function(){var e=this.props,t=e.thing,a=e.thingShadow;return a?a.state.reported.status:t.status}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.thingShadow,o=e.hideIcon,i=void 0!==o&&o,c=e.hideLabel,s=void 0!==c&&c,l=e.hideValue,u=void 0!==l&&l;if(!a&&!n)return null;var m=this.isDisconnected(),d=this.getStatus();return r.a.createElement(r.a.Fragment,null,!i&&("normal"===d?r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.a,{className:t.icon,style:{color:m?"#3498db":"rgb(46,204,113)"}})):"almin"===d?r.a.createElement(r.a.Fragment,null,r.a.createElement(st.a,{className:t.icon,style:{color:m?"#3498db":"rgb(252,118,0)"}})):"almaj"===d?r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.a,{className:t.icon,style:{color:m?"#3498db":"rgb(232,15,15)"}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(dt.a,{className:t.icon,color:"action"}))),!s&&r.a.createElement("span",{className:t.label},"\u0421\u0442\u0430\u0442\u0443\u0441"),!u&&("normal"===d?r.a.createElement(r.a.Fragment,null,m?r.a.createElement("span",null,r.a.createElement("b",null,"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438")," (\u043d\u043e\u0440\u043c\u0430)"):r.a.createElement("span",null,"\u041d\u043e\u0440\u043c\u0430")):"almin"===d?r.a.createElement(r.a.Fragment,null,m?r.a.createElement("span",null,r.a.createElement("b",null,"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438")," (\u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435)"):r.a.createElement("span",null,"\u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435")):"almaj"===d?r.a.createElement(r.a.Fragment,null,m?r.a.createElement("span",null,r.a.createElement("b",null,"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438")," (\u0430\u0432\u0430\u0440\u0438\u044f)"):r.a.createElement("span",null,"\u0410\u0432\u0430\u0440\u0438\u044f")):r.a.createElement(r.a.Fragment,null,m?r.a.createElement("span",null,r.a.createElement("b",null,"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438")," (\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e)"):r.a.createElement("span",null,"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"))))}}]),t}(r.a.PureComponent),pt=Object(se.a)(function(e){return{root:{},icon:{marginRight:8,verticalAlign:"middle"}}})(ht),gt=a(416),bt=a.n(gt),ft=a(417),vt=a.n(ft),Et=a(1258),yt=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"isActive",value:function(){var e=this.props,t=e.thing,a=e.thingShadow;return a?!0===a.state.reported.alarm:!0===t.alarm||"true"===t.alarm}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.thingShadow,o=e.hideIcon,i=void 0!==o&&o,c=e.hideLabel,s=void 0!==c&&c,l=e.hideValue,u=void 0!==l&&l,m=e.whenActive,d=void 0===m?null:m;return a||n?r.a.createElement("span",{className:t.root},!i&&(s||u?r.a.createElement(Et.a,{title:r.a.createElement("span",{className:t.tooltip},"\u0421\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f: ",r.a.createElement("span",null,this.renderValue()))},this.renderIcon()):this.renderIcon()),!s&&r.a.createElement("span",{className:t.label},"\u0421\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f"),!u&&this.renderValue(),d&&this.isActive()&&d):null}},{key:"renderIcon",value:function(){var e=this.props.classes;return this.isActive()?r.a.createElement(bt.a,{className:"".concat(e.icon," ").concat(e.icon_textPrimary)}):r.a.createElement(vt.a,{className:"".concat(e.icon," ").concat(e.icon_textSecondary)})}},{key:"renderValue",value:function(){var e=this.props.classes;return this.isActive()?r.a.createElement("strong",{className:e.value},"\u0410\u043a\u0442\u0438\u0432\u043d\u0430"):r.a.createElement("span",{className:e.value},"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u0430")}}]),t}(r.a.PureComponent),wt=Object(se.a)(function(e){return{root:{},icon:{position:"relative",top:-1,marginRight:8,verticalAlign:"middle"},icon_textPrimary:{color:e.palette.text.primary},icon_textSecondary:{color:e.palette.text.secondary},tooltip:{fontWeight:"normal","& > span":{textTransform:"lowercase"}}}})(yt),Ct=a(418),jt=a.n(Ct),xt=a(44),Ot=a.n(xt),St=Ot()(r.a.createElement("path",{d:"M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10A2,2 0 0,1 6,8H15V6A3,3 0 0,0 12,3A3,3 0 0,0 9,6H7A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,17A2,2 0 0,0 14,15A2,2 0 0,0 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17Z"}),"LockOpen"),kt=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"isActive",value:function(){var e=this.props,t=e.thing,a=e.thingShadow;return a?!0===a.state.reported.guard:!0===t.guard||"true"===t.guard}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.thingShadow,o=e.hideIcon,i=void 0!==o&&o,c=e.hideLabel,s=void 0!==c&&c,l=e.hideValue,u=void 0!==l&&l,m=e.whenActive,d=e.whenInactive;return a||n?r.a.createElement("span",{className:t.root},!i&&(s||u?r.a.createElement(Et.a,{title:r.a.createElement("span",{className:t.tooltip},"\u041e\u0445\u0440\u0430\u043d\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u0430: ",r.a.createElement("span",null,this.renderValue()))},this.renderIcon()):this.renderIcon()),!s&&r.a.createElement("span",{className:t.label},"\u041e\u0445\u0440\u0430\u043d\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u0430"),!u&&this.renderValue(),m&&this.isActive()&&m,d&&!this.isActive()&&d):null}},{key:"renderIcon",value:function(){var e=this.props.classes;return this.isActive()?r.a.createElement(jt.a,{className:"".concat(e.icon," ").concat(e.icon_textSecondary)}):r.a.createElement(St,{className:"".concat(e.icon," ").concat(e.icon_textPrimary)})}},{key:"renderValue",value:function(){var e=this.props.classes;return this.isActive()?r.a.createElement("span",{className:e.value},"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0430"):r.a.createElement("strong",{className:e.value},"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0430")}}]),t}(r.a.PureComponent),Nt=Object(se.a)(function(e){return{root:{},icon:{position:"relative",top:-1,marginRight:8,verticalAlign:"middle"},icon_textPrimary:{color:e.palette.text.primary},icon_textSecondary:{color:e.palette.text.secondary},tooltip:{fontWeight:"normal","& > span":{textTransform:"lowercase"}}}})(kt),At=a(419),It=a.n(At),Lt=a(420),_t=a.n(Lt),Pt=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"isActive",value:function(){var e=this.props,t=e.thing,a=e.thingShadow;return a?!0===a.state.reported.pwr:!0===t.pwr||"true"===t.pwr}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.thingShadow,o=e.hideIcon,i=void 0!==o&&o,c=e.hideLabel,s=void 0!==c&&c,l=e.hideValue,u=void 0!==l&&l;return a||n?r.a.createElement("span",{className:t.root},!i&&(s||u?r.a.createElement(Et.a,{title:r.a.createElement("span",{className:t.tooltip},"\u041f\u0438\u0442\u0430\u043d\u0438\u0435: ",r.a.createElement("span",null,this.renderValue()))},this.renderIcon()):this.renderIcon()),!s&&r.a.createElement("span",{className:t.label},"\u041f\u0438\u0442\u0430\u043d\u0438\u0435"),!u&&this.renderValue()):null}},{key:"renderIcon",value:function(){var e=this.props.classes;return this.isActive()?r.a.createElement(It.a,{className:"".concat(e.icon," ").concat(e.icon_textSecondary)}):r.a.createElement(_t.a,{className:"".concat(e.icon," ").concat(e.icon_textPrimary)})}},{key:"renderValue",value:function(){var e=this.props.classes;return this.isActive()?r.a.createElement("span",{className:e.value},"\u041f\u043e\u0441\u0442\u0443\u043f\u0430\u0435\u0442"):r.a.createElement("strong",{className:e.value},"\u041d\u0435 \u043f\u043e\u0441\u0442\u0443\u043f\u0430\u0435\u0442")}}]),t}(r.a.PureComponent),Tt=Object(se.a)(function(e){return{root:{},icon:{position:"relative",top:-1,marginRight:8,verticalAlign:"middle"},icon_textPrimary:{color:e.palette.text.primary},icon_textSecondary:{color:e.palette.text.secondary}}})(Pt),Dt=Ot()(r.a.createElement("path",{d:"M11,3V7H13V3H11M8,4V11H16V4H14V8H10V4H8M10,12V22H14V12H10Z"}),"LockOpen"),Rt=Ot()(r.a.createElement("path",{d:"M4.93,4.93C3.12,6.74 2,9.24 2,12C2,14.76 3.12,17.26 4.93,19.07L6.34,17.66C4.89,16.22 4,14.22 4,12C4,9.79 4.89,7.78 6.34,6.34L4.93,4.93M19.07,4.93L17.66,6.34C19.11,7.78 20,9.79 20,12C20,14.22 19.11,16.22 17.66,17.66L19.07,19.07C20.88,17.26 22,14.76 22,12C22,9.24 20.88,6.74 19.07,4.93M7.76,7.76C6.67,8.85 6,10.35 6,12C6,13.65 6.67,15.15 7.76,16.24L9.17,14.83C8.45,14.11 8,13.11 8,12C8,10.89 8.45,9.89 9.17,9.17L7.76,7.76M16.24,7.76L14.83,9.17C15.55,9.89 16,10.89 16,12C16,13.11 15.55,14.11 14.83,14.83L16.24,16.24C17.33,15.15 18,13.65 18,12C18,10.35 17.33,8.85 16.24,7.76M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10Z"}),"LockOpen"),Ht=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"isEthernet",value:function(){var e=this.props,t=e.thing,a=e.thingShadow;return a?"eth"===a.state.reported.conn:"eth"===t.conn}},{key:"isGsm",value:function(){var e=this.props,t=e.thing,a=e.thingShadow;return a?"gsm"===a.state.reported.conn:"gsm"===t.conn}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.thingShadow,o=e.hideIcon,i=void 0!==o&&o,c=e.hideLabel,s=void 0!==c&&c,l=e.hideValue,u=void 0!==l&&l;return a||n?r.a.createElement("span",{className:t.root},!i&&(s||u?r.a.createElement(Et.a,{title:r.a.createElement("span",{className:t.tooltip},"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u0430\u043d\u0430\u043b: ",r.a.createElement("span",null,this.renderValue()))},this.renderIcon()):this.renderIcon()),!s&&r.a.createElement("span",{className:t.label},"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u0430\u043d\u0430\u043b"),!u&&this.renderValue()):null}},{key:"renderIcon",value:function(){var e=this.props.classes;return this.isEthernet()?r.a.createElement(Dt,{className:"".concat(e.icon," ").concat(e.icon_textSecondary)}):r.a.createElement(Rt,{className:"".concat(e.icon," ").concat(e.icon_textSecondary)})}},{key:"renderValue",value:function(){var e=this.props.classes;return this.isEthernet()?r.a.createElement("span",{className:e.value},"Ethernet"):this.isGsm()?r.a.createElement("span",{className:e.value},"GSM"):r.a.createElement("span",{className:e.value},"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")}}]),t}(r.a.PureComponent),Mt=Object(se.a)(function(e){return{root:{},icon:{position:"relative",top:-1,marginRight:8,verticalAlign:"middle"},icon_textPrimary:{color:e.palette.text.primary},icon_textSecondary:{color:e.palette.text.secondary}}})(Ht),Gt=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"isDisconnectedThing",value:function(e){var t=new Date(Number("".concat(e.msgtime,"000")));return new Date-t>72e5}},{key:"render",value:function(){var e,t=this.props,a=t.index,n=t.style,o=t.data,i=(o=void 0===o?{}:o).classes,c=o.data,s=o.addressById,l=o.onClickThing,u=c[a],m=new Date,d=Number("".concat(u.msgtime,"000")),h=tt()(d),p=this.isDisconnectedThing(u);return p&&(m-d>864e5?e=24:m-d>72e5&&(e=2)),r.a.createElement("div",{className:"".concat(i.item," ").concat(p?i.item_noConnection:""),style:n,onClick:function(){l(u)}},r.a.createElement("div",{className:"".concat(i.itemColumn," ").concat(i.itemColumn_status)},r.a.createElement(pt,{thing:u,hideLabel:!0})),r.a.createElement("div",{className:"".concat(i.itemColumn," ").concat(i.itemColumn_object)},r.a.createElement(Re,{thing:u,addressById:s})),r.a.createElement("div",{className:"".concat(i.itemColumn," ").concat(i.itemColumn_problems)},p&&r.a.createElement("strong",null,"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438 ",e,"\u0447"),(!0===u.alarm||"true"===u.alarm)&&r.a.createElement("strong",null,"\u0421\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430"),!(!0===u.guard||"true"===u.guard)&&r.a.createElement("strong",null,"\u041e\u0445\u0440\u0430\u043d\u0430 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0430")),r.a.createElement("div",{className:"".concat(i.itemColumn," ").concat(i.itemColumn_details)},r.a.createElement(wt,{hideLabel:!0,hideValue:!0,thing:u}),r.a.createElement(Nt,{hideLabel:!0,hideValue:!0,thing:u}),r.a.createElement(Tt,{hideLabel:!0,hideValue:!0,thing:u}),r.a.createElement(Mt,{hideLabel:!0,hideValue:!0,thing:u})),r.a.createElement("div",{className:"".concat(i.itemColumn," ").concat(i.itemColumn_updated)},r.a.createElement("time",{dateTime:h.format("DD.MM.YY HH:mm"),title:h.format("YYYY-MM-DD HH:mm")},tt.a.duration(d-m).locale("ru").humanize(!0))))}}]),t}(r.a.PureComponent),Vt=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(J.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={data:null},a}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.onFetchThingList)(),(0,this.props.onFetchAddressList)()}},{key:"componentDidUpdate",value:function(e,t,a){var n,r=this.props,o=r.thingListParams,i=r.thingList;if(i&&(o!==e.thingListParams||i!==e.thingList)){var c=(n=o,i.filter(function(e){var t=!0;return Object.entries(n).forEach(function(a){var n=Object(T.a)(a,2),r=n[0],o=n[1];if(t)switch(r){case"address":if(o)return void(t=e.group_id===o);case"noPower":return void(!0===o&&(t=!1,!1!==e.pwr&&"false"!==e.pwr||(t=!0)));case"noConnection2h":if(!0===o&&(t=!1,e.msgtime)){var i=new Date(Number("".concat(e.msgtime,"000")));new Date-i>=72e5&&(t=!0)}return;case"noConnection24h":if(!0===o&&(t=!1,e.msgtime)){var c=new Date(Number("".concat(e.msgtime,"000")));new Date-c>=864e5&&(t=!0)}return;case"noEthernet":return void(!0===o&&(t=!1,"eth"!==e.conn&&(t=!0)));case"lowGsm":return void(!0===o&&(t=!1,Number(""+e.rssi||"0")<=-92&&(t=!0)));case"activeEthernet":return void(!0===o&&(t=!1,"eth"===e.conn&&(t=!0)));case"activeGsm":return void(!0===o&&(t=!1,"gsm"===e.conn&&(t=!0)));case"noConnection":if(!0===o&&(t=!1,e.msgtime)){var s=new Date(Number("".concat(e.msgtime,"000")));new Date-s>=72e5&&(t=!0)}return;case"statusNormal":if(!0===o&&(t=!1,"normal"===e.status))if(e.msgtime){var l=new Date(Number("".concat(e.msgtime,"000")));new Date-l<72e5&&(t=!0)}else t=!0;return;case"statusAlmin":if(!0===o&&(t=!1,"almin"===e.status))if(e.msgtime){var u=new Date(Number("".concat(e.msgtime,"000")));new Date-u<72e5&&(t=!0)}else t=!0;return;case"statusAlmaj":if(!0===o&&(t=!1,"almaj"===e.status))if(e.msgtime){var m=new Date(Number("".concat(e.msgtime,"000")));new Date-m<72e5&&(t=!0)}else t=!0;return}}),t}));this.setState({data:c})}}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.addressList,n=e.onClickThing,o=this.state.data;if(!o||!a||!a.Items)return null;var i=a.Items.reduce(function(e,t){return e[t.group_id.N]=t,e},{});return r.a.createElement(le.a,{flexGrow:1,display:"flex",flexDirection:"column"},r.a.createElement(le.a,null,r.a.createElement("div",{className:"".concat(t.head)},r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_status)},"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_object)},"\u041e\u0431\u044a\u0435\u043a\u0442"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_problems)},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u043d\u044b\u0435 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_details)},"\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435"),r.a.createElement("div",{className:"".concat(t.itemColumn," ").concat(t.itemColumn_updated)},"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e"))),r.a.createElement(le.a,{flexGrow:1,position:"relative"},r.a.createElement(be.a,null,function(e){var a=e.width,c=e.height;return r.a.createElement(ge.a,{className:t.list,width:a,height:c,itemCount:o.length,itemSize:48,overscanCount:1,itemData:{classes:t,data:o,addressById:i,onClickThing:n}},Gt)})))}}]),t}(r.a.PureComponent),Wt=Object(se.a)(function(e){return{root:{},head:{display:"flex",flexWrap:"nowrap",alignItems:"start",WebkitBoxOrient:"horizontal",WebkitBoxDirection:"normal",WebkitBoxAlign:"start",marginTop:-12,"& $itemColumn":{height:24,whiteSpace:"nowrap"}},item:{display:"flex",flexWrap:"nowrap",alignItems:"start",WebkitBoxOrient:"horizontal",WebkitBoxDirection:"normal",WebkitBoxAlign:"start",boxShadow:"inset 0 1px 0 0 rgba(0, 0, 0, 0.12)","&:last-child":{boxShadow:"inset 0 1px 0 0 rgba(0, 0, 0, 0.12), 0 1px 0 0 rgba(0, 0, 0, 0.12)"}},item_noConnection:{"& $itemColumn_details":{opacity:.37}},itemColumn:{display:"flex",alignItems:"center",boxSizing:"content-box",minWidth:0,overflow:"hidden",height:48,paddingLeft:12,paddingRight:12,lineHeight:"16px",fontSize:"14px","&:first-child":{paddingLeft:e.spacing(3)}},itemColumn_status:{flex:"0 0 ".concat(e.spacing(3)+120+e.spacing(3),"px"),whiteSpace:"nowrap"},itemColumn_object:{flex:"0 1 30%"},itemColumn_problems:{flex:"0 1 20%","& strong":{"&:not(:first-child)":{textTransform:"lowercase"},"&:not(:last-child)::after":{content:'","',marginRight:4}}},itemColumn_details:{flex:"1 1 20%",minWidth:160},itemColumn_updated:{flex:"0 0 ".concat(e.spacing(3)+60+e.spacing(3),"px"),whiteSpace:"nowrap"}}})(Vt),Ft=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement(Wt,this.props)}}]),t}(r.a.PureComponent),Bt=Object(s.b)(function(e){return{thingListParams:e.dispatch.filter.params,thingList:e.thingList.data,thingListPending:e.thingList.dataPending,thingListError:e.thingList.dataError,addressList:e.addressList.list}},function(e){return{onFetchThingList:function(t){return e(function(){var e=Object(O.a)(x.a.mark(function e(t,a){var n,r,o,i,c,s,l;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:R,status:"pending"}),e.prev=1,n=a(),r=n.session.user,_.config.update({region:p.region}),o="cognito-idp."+p.region+".amazonaws.com/"+p.userPoolId,_.config.credentials=new _.CognitoIdentityCredentials({IdentityPoolId:p.identityPoolId,Logins:Object(h.a)({},o,r.credentials.idToken)}),new _.Iot(r.credentials),i=new _.IoTAnalytics,e.next=10,D(i,"st_eye_dataset_dispatch");case 10:return c=e.sent,s=c.entries[0].dataURI,e.next=14,P(s);case 14:l=e.sent,t({type:R,status:"success",payload:l}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),t({type:R,status:"failure",payload:e.t0});case 21:case"end":return e.stop()}},e,null,[[1,18]])}));return function(t,a){return e.apply(this,arguments)}}())},onFetchAddressList:function(t){return e(function(){var e=Object(O.a)(x.a.mark(function e(t){var a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:S,status:"pending"}),e.next=3,fetch(p.restApi+"/addresses");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,a.ok?t({type:S,status:"success",payload:n}):t({type:S,status:"failure",payload:n});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}})(Ft),zt=a(423),Ut=a(107),$t=a.n(Ut),qt=a(102);function Kt(e,t,a){var n=_.util.date.iso8601(new Date).replace(/[:\-]|\.\d{3}/g,""),r=n.substr(0,8),o=r+"/"+t+"/iotdevicegateway/aws4_request",i="X-Amz-Algorithm=AWS4-HMAC-SHA256";i+="&X-Amz-Credential="+encodeURIComponent(a.accessKeyId+"/"+o),i+="&X-Amz-Date="+n;var c="GET\n/mqtt\n"+(i+="&X-Amz-SignedHeaders=host")+"\n"+("host:"+e+"\n")+"\nhost\n"+_.util.crypto.sha256("","hex"),s="AWS4-HMAC-SHA256\n"+n+"\n"+o+"\n"+_.util.crypto.sha256(c,"hex"),l=function(e,t,a,n){var r=_.util.crypto.hmac("AWS4"+e,t,"buffer"),o=_.util.crypto.hmac(r,a,"buffer"),i=_.util.crypto.hmac(o,n,"buffer");return _.util.crypto.hmac(i,"aws4_request","buffer")}(a.secretAccessKey,r,t,"iotdevicegateway");return i+="&X-Amz-Signature="+_.util.crypto.hmac(l,s,"hex"),a.sessionToken&&(i+="&X-Amz-Security-Token="+encodeURIComponent(a.sessionToken)),"wss://"+e+"/mqtt?"+i}var Yt=function(e){function t(e){var a;return Object(K.a)(this,t),(a=Object(J.a)(this,Object(X.a)(t).call(this))).client=e,a.client.onMessageArrived=function(e){a.emit(e.destinationName,e)},a}return Object(Z.a)(t,e),t}(a.n(qt).a),Jt=null;function Xt(){if(Jt)return Promise.resolve(Jt);var e=Kt("a2xnjhywaij79l-ats.iot.us-west-2.amazonaws.com",_.config.region,_.config.credentials),t=new $t.a.Client(e,p.clientId);return new Promise(function(e,a){t.connect({onSuccess:function(){console.log("connected!11"),Jt=new Yt(t),e(Jt)}})})}function Zt(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).timeout,a=void 0===t?3:t;return Promise.all([new Promise(function(t,n){Jt.client.subscribe("$aws/things/".concat(e.device,"/shadow/get/accepted"),{onSuccess:t,onFailure:n,timeout:a})}),new Promise(function(t,n){Jt.client.subscribe("$aws/things/".concat(e.device,"/shadow/get/rejected"),{onSuccess:t,onFailure:n,timeout:a})})])}function Qt(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).timeout,a=void 0===t?3:t;return Promise.all([new Promise(function(t,n){Jt.client.subscribe("$aws/things/".concat(e.device,"/shadow/update/accepted"),{onSuccess:t,onFailure:n,timeout:a})}),new Promise(function(t,n){Jt.client.subscribe("$aws/things/".concat(e.device,"/shadow/update/rejected"),{onSuccess:t,onFailure:n,timeout:a})})])}function ea(e){var t=new $t.a.Message("");t.destinationName="$aws/things/".concat(e.device,"/shadow/get"),Jt.client.send(t)}function ta(e,t){var a=new $t.a.Message(JSON.stringify(t));a.destinationName="$aws/things/".concat(e.device,"/shadow/update"),Jt.client.send(a)}var aa=a(1250),na=a(1245),ra=a(1246),oa=a(1249),ia=a(1247),ca=a(1248),sa=a(1259),la=a(1252),ua=a(1253),ma=a(93),da=a.n(ma),ha=(a(1204),a(421)),pa=a.n(ha),ga=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"getValue",value:function(){var e=this.props,t=e.thing,a=e.thingShadow;return a?tt()(Number("".concat(a.state.reported.msgtime,"000"))).format("DD.MM.YY HH:mm"):tt()(Number("".concat(t.msgtime,"000"))).format("DD.MM.YY HH:mm")}},{key:"getValueDuration",value:function(){var e=this.props,t=e.thing,a=e.thingShadow;return a?tt.a.duration(Number("".concat(a.state.reported.msgtime,"000"))-(new Date).getTime()).locale("ru").humanize(!0):tt.a.duration(Number("".concat(t.msgtime,"000"))-(new Date).getTime()).locale("ru").humanize(!0)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.thingShadow,o=e.hideIcon,i=void 0!==o&&o,c=e.hideLabel,s=void 0!==c&&c,l=e.hideValue,u=void 0!==l&&l,m=e.hideValueDuration,d=void 0!==m&&m;return a||n?r.a.createElement("span",{className:t.root},!i&&r.a.createElement(pa.a,{className:"".concat(t.icon," ").concat(t.icon_textSecondary)}),!s&&r.a.createElement("span",{className:t.label},"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e"),!u&&r.a.createElement("span",{className:t.value},this.getValue()),!d&&r.a.createElement("span",{className:t.valueDuration},this.getValueDuration())):null}}]),t}(r.a.PureComponent),ba=Object(se.a)(function(e){return{root:{},icon:{position:"relative",top:-1,marginRight:8,verticalAlign:"middle"},icon_textPrimary:{color:e.palette.text.primary},icon_textSecondary:{color:e.palette.text.secondary}}})(ga),fa=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(J.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.sensor;return a?r.a.createElement(r.a.Fragment,null,"normal"===a.status?r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.a,{className:t.icon,style:{color:"rgb(46,204,113)"}}),r.a.createElement("span",null,"\u041d\u043e\u0440\u043c\u0430")):"almin"===a.status?r.a.createElement(r.a.Fragment,null,r.a.createElement(st.a,{className:t.icon,style:{color:"rgb(252,118,0)"}}),r.a.createElement("span",null,"\u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435")):"almaj"===a.status?r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.a,{className:t.icon,style:{color:"rgb(232,15,15)"}}),r.a.createElement("span",null,"\u0410\u0432\u0430\u0440\u0438\u044f")):r.a.createElement(r.a.Fragment,null,r.a.createElement(dt.a,{className:t.icon,color:"action"}),r.a.createElement("span",null,"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"))):null}}]),t}(r.a.PureComponent),va=Object(se.a)(function(e){return{root:{},icon:{position:"relative",top:-1,width:16,height:16,marginLeft:4,marginRight:8,verticalAlign:"middle"}}})(fa),Ea=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.thingShadow;return a||n?r.a.createElement("div",{className:t.root},r.a.createElement(na.a,{className:t.table},r.a.createElement(ra.a,null,r.a.createElement(ia.a,null,r.a.createElement(ca.a,null,"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(ca.a,null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(ca.a,null,"\u0420\u043e\u043b\u044c"),r.a.createElement(ca.a,null,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"))),r.a.createElement(oa.a,null,!!n&&n.state.reported.ain&&n.state.reported.ain.map(function(e,t){return r.a.createElement(ia.a,{key:t},r.a.createElement(ca.a,null,r.a.createElement(va,{sensor:e})),r.a.createElement(ca.a,null,e.name),r.a.createElement(ca.a,null,e.role),r.a.createElement(ca.a,null,e.value))})))):null}}]),t}(r.a.PureComponent),ya=Object(se.a)(function(e){return{root:{flexGrow:1},table:{marginTop:e.spacing(0),marginBottom:e.spacing(3),"& thead th":{padding:e.spacing(0,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& tbody th, & tbody td":{padding:e.spacing(1.5,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& > tbody > tr:last-child th, & > tbody > tr:last-child td":{borderBottom:0}}}})(Ea),wa=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.thingShadow;return a||n?r.a.createElement("div",{className:t.root},r.a.createElement(na.a,{className:t.table},r.a.createElement(ra.a,null,r.a.createElement(ia.a,null,r.a.createElement(ca.a,null,"\u041f\u0438\u043d"),r.a.createElement(ca.a,null,"0"),r.a.createElement(ca.a,null,"1"),r.a.createElement(ca.a,null,"2"),r.a.createElement(ca.a,null,"3"),r.a.createElement(ca.a,null,"4"),r.a.createElement(ca.a,null,"5"))),r.a.createElement(oa.a,null,r.a.createElement(ia.a,null,r.a.createElement(ca.a,{component:"th",scope:"row"},"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),r.a.createElement(ca.a,null,"0"),r.a.createElement(ca.a,null,"0"),r.a.createElement(ca.a,null,"0"),r.a.createElement(ca.a,null,"0"),r.a.createElement(ca.a,null,"0"),r.a.createElement(ca.a,null,"0"))))):null}}]),t}(r.a.PureComponent),Ca=Object(se.a)(function(e){return{root:{flexGrow:1},table:{marginTop:e.spacing(0),marginBottom:e.spacing(3),"& thead th":{padding:e.spacing(0,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& tbody th, & tbody td":{padding:e.spacing(1.5,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& > tbody > tr:last-child th, & > tbody > tr:last-child td":{borderBottom:0}}}})(wa),ja=a(1251),xa=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"isThingRelayDesired",value:function(e){var t=this.props.thingShadow.state,a=t.desired,n=t.reported;if(a){var r=a.relay,o=n.relay;if(r&&r[e]!==o[e])return!0}return!1}},{key:"isThingRelayOn",value:function(e){var t=this.props,a=t.thingShadow,n=t.unsavedRelayState;return void 0!==n?!!n[e]:a.state.desired&&a.state.desired.relay?!!a.state.desired.relay[e]:a.state.reported&&a.state.reported.relay?!!a.state.reported.relay[e]:void 0}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.thing,o=t.thingShadow,i=t.onChangeRelay;return n||o?r.a.createElement("div",{className:a.root},r.a.createElement(na.a,{className:a.table},r.a.createElement(ra.a,null,r.a.createElement(ia.a,null,r.a.createElement(ca.a,null,"\u0420\u0435\u043b\u0435"),r.a.createElement(ca.a,null,"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"),r.a.createElement(ca.a,null))),r.a.createElement(oa.a,null,!!o&&!!o.state.reported.relay&&o.state.reported.relay.map(function(t,a){return r.a.createElement(ia.a,{key:a},r.a.createElement(ca.a,{component:"th",scope:"row"},"\u0420\u0435\u043b\u0435 ",a),r.a.createElement(ca.a,null,e.isThingRelayOn(a)?"\u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e":"\u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e"),r.a.createElement(ca.a,null,r.a.createElement(le.a,{display:"inline-flex",alignItems:"center"},e.isThingRelayDesired(a)&&r.a.createElement(aa.a,{style:{width:20,height:20}}),r.a.createElement(ja.a,{color:e.isThingRelayDesired(a)?"primary":"secondary",disabled:!o,checked:e.isThingRelayOn(a),onChange:function(e){var t=e.target.checked;i(a,t)}}))))})))):null}}]),t}(r.a.PureComponent),Oa=Object(se.a)(function(e){return{root:{flexGrow:1},table:{marginTop:e.spacing(0),marginBottom:e.spacing(3),"& thead th":{padding:e.spacing(0,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& tbody th, & tbody td":{height:48,padding:e.spacing(0,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& tbody th":{width:"37%"},"& tbody td:last-child":{width:1,paddingRight:0,textAlign:"right"},"& > tbody > tr:last-child th, & > tbody > tr:last-child td":{borderBottom:0}}}})(xa),Sa=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing,n=e.thingShadow,o=e.bus;return(a||n)&&o?r.a.createElement("div",{className:t.root},r.a.createElement(na.a,{className:t.table},r.a.createElement(ra.a,null,r.a.createElement(ia.a,null,r.a.createElement(ca.a,null,"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(ca.a,null,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"))),r.a.createElement(oa.a,null,!!n&&n.state.reported[o]&&n.state.reported[o].map(function(e,t){return e.water?((e=e.water).type="water",r.a.createElement(ia.a,{key:t},r.a.createElement(ca.a,null,r.a.createElement(va,{sensor:e})),r.a.createElement(ca.a,null,e.value))):null})))):null}}]),t}(r.a.PureComponent),ka=Object(se.a)(function(e){return{root:{flexGrow:1},table:{marginTop:e.spacing(0),marginBottom:e.spacing(3),"& thead th":{padding:e.spacing(0,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& tbody th, & tbody td":{padding:e.spacing(1.5,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& > tbody > tr:last-child th, & > tbody > tr:last-child td":{borderBottom:0}}}})(Sa),Na=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(J.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={thingShadowPending:!1,thingShadowError:null,thingShadow:null,unsavedRelayState:void 0},a.handleThingShadowGetAccepted=function(e){var t=JSON.parse(e.payloadString);a.setState({thingShadowPending:!1,thingShadowError:null,thingShadow:t})},a.handleThingShadowGetRejected=function(e){var t=JSON.parse(e.payloadString);a.setState({thingShadowPending:!1,thingShadowError:t,thingShadow:null})},a.handleThingShadowUpdateAccepted=function(e){var t=JSON.parse(e.payloadString).state;a.setState({thingShadow:Object(d.a)({},a.state.thingShadow,{state:Object(d.a)({},a.state.thingShadow.state,t)}),unsavedRelayState:void 0})},a.handleThingShadowUpdateRejected=function(e){},a.handleChangeAlarm=Object(O.a)(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:!1,ta(a.props.thing,{state:{desired:{alarm:!1}}});case 2:case"end":return e.stop()}},e)})),a.handleChangeGuard=Object(O.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!(t=a.getThingShadowGuardState()),ta(a.props.thing,{state:{desired:{guard:t}}});case 3:case"end":return e.stop()}},e)})),a.handleChangeRelay=function(){var e=Object(O.a)(x.a.mark(function e(t,n){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=Object(zt.a)(a.getThingShadowRelayState()))[t]=n?1:0,ta(a.props.thing,{state:{desired:{relay:r}}});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){this.listenThingShadow()}},{key:"componentWillUnmount",value:function(){this.unlistenThingShadow()}},{key:"listenThingShadow",value:function(){var e=Object(O.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.thing,this.setState({thingShadowPending:!0,thingShadowError:null,thingShadow:null}),e.next=4,Xt();case 4:return this.awsMqttClient=e.sent,this.awsMqttClient.on("$aws/things/".concat(t.device,"/shadow/get/accepted"),this.handleThingShadowGetAccepted),this.awsMqttClient.on("$aws/things/".concat(t.device,"/shadow/get/rejected"),this.handleThingShadowGetRejected),this.awsMqttClient.on("$aws/things/".concat(t.device,"/shadow/update/accepted"),this.handleThingShadowUpdateAccepted),this.awsMqttClient.on("$aws/things/".concat(t.device,"/shadow/update/rejected"),this.handleThingShadowUpdateRejected),e.next=11,Zt(t);case 11:return e.next=13,Qt(t);case 13:ea(t);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"unlistenThingShadow",value:function(){var e=this.props.thing;this.awsMqttClient.removeListener("$aws/things/".concat(e.device,"/shadow/get/accepted"),this.handleThingShadowGetAccepted),this.awsMqttClient.removeListener("$aws/things/".concat(e.device,"/shadow/get/rejected"),this.handleThingShadowGetRejected),this.awsMqttClient.removeListener("$aws/things/".concat(e.device,"/shadow/update/accepted"),this.handleThingShadowUpdateAccepted),this.awsMqttClient.removeListener("$aws/things/".concat(e.device,"/shadow/update/rejected"),this.handleThingShadowUpdateRejected)}},{key:"getThingShadowAlertState",value:function(){var e=this.state.thingShadow.state;return e.desired&&e.desired.alert?e.desired.alert:!!e.reported&&e.reported.alert}},{key:"getThingShadowGuardState",value:function(){var e=this.state.thingShadow.state;return e.desired&&e.desired.guard?e.desired.guard:!!e.reported&&e.reported.guard}},{key:"getThingShadowRelayState",value:function(){if(void 0!==this.state.unsavedRelayState)return this.state.unsavedRelayState||[];var e=this.state.thingShadow.state;return e.desired&&e.desired.relay?e.desired.relay||[]:e.reported&&e.reported.relay&&e.reported.relay||[]}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.thing;return a?(console.groupCollapsed("RENDER THING DETAILS"),console.log("THING",a),console.log("THING SHADOW",this.state.thingShadow),console.groupEnd(),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,this.state.thingShadowPending&&r.a.createElement(aa.a,{className:t.progress}),r.a.createElement(sa.a,{className:t.panel,elevation:0,defaultExpanded:!0},r.a.createElement(la.a,{classes:{root:t.panelSummary,content:t.panelSummaryContent},expandIcon:r.a.createElement(da.a,null)},r.a.createElement(de.a,{className:t.panelHeading,variant:"h6"},"\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435"),r.a.createElement(le.a,{flexGrow:1}),r.a.createElement(le.a,{alignItems:"center",className:t.panelDetailsShort},r.a.createElement(pt,{hideLabel:!0,hideValue:!0,thing:a,thingShadow:this.state.thingShadow}),r.a.createElement(wt,{hideLabel:!0,hideValue:!0,thing:a,thingShadow:this.state.thingShadow}),r.a.createElement(Nt,{hideLabel:!0,hideValue:!0,thing:a,thingShadow:this.state.thingShadow}),r.a.createElement(Tt,{hideLabel:!0,hideValue:!0,thing:a,thingShadow:this.state.thingShadow}),r.a.createElement(Mt,{hideLabel:!0,hideValue:!0,thing:a,thingShadow:this.state.thingShadow}))),r.a.createElement(ua.a,{className:t.panelDetails},r.a.createElement(na.a,{className:t.table},r.a.createElement(ra.a,null,r.a.createElement(ia.a,null,r.a.createElement(ca.a,null,"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e"),r.a.createElement(ca.a,null,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),r.a.createElement(ca.a,null))),r.a.createElement(oa.a,null,r.a.createElement(ia.a,null,r.a.createElement(ca.a,{component:"th",scope:"row"},r.a.createElement(pt,{hideValue:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,null,r.a.createElement(pt,{hideIcon:!0,hideLabel:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,null)),r.a.createElement(ia.a,null,r.a.createElement(ca.a,{component:"th",scope:"row"},r.a.createElement(wt,{hideValue:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,null,r.a.createElement(wt,{hideIcon:!0,hideLabel:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,{style:{textAlign:"right",paddingRight:0}},r.a.createElement(wt,{hideIcon:!0,hideLabel:!0,hideValue:!0,thing:a,thingShadow:this.state.thingShadow,whenActive:r.a.createElement(Fe.a,{variant:"outlined",color:"secondary",disabled:this.state.thingShadowPending,onClick:this.handleChangeAlarm},"\u041a\u0432\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")}))),r.a.createElement(ia.a,null,r.a.createElement(ca.a,{component:"th",scope:"row"},r.a.createElement(Nt,{hideValue:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,null,r.a.createElement(Nt,{hideIcon:!0,hideLabel:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,{style:{textAlign:"right",paddingRight:0}},r.a.createElement(Nt,{hideIcon:!0,hideLabel:!0,hideValue:!0,thing:a,thingShadow:this.state.thingShadow,whenActive:r.a.createElement(Fe.a,{variant:"outlined",color:"secondary",disabled:this.state.thingShadowPending,onClick:this.handleChangeGuard},"\u0421\u043d\u044f\u0442\u044c \u0441 \u043e\u0445\u0440\u0430\u043d\u044b"),whenInactive:r.a.createElement(Fe.a,{variant:"outlined",color:"secondary",disabled:this.state.thingShadowPending,onClick:this.handleChangeGuard},"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043e\u0445\u0440\u0430\u043d\u0443")}))),r.a.createElement(ia.a,null,r.a.createElement(ca.a,{component:"th",scope:"row"},r.a.createElement(Tt,{hideValue:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,null,r.a.createElement(Tt,{hideIcon:!0,hideLabel:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,null)),r.a.createElement(ia.a,null,r.a.createElement(ca.a,{component:"th",scope:"row"},r.a.createElement(Mt,{hideValue:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,null,r.a.createElement(Mt,{hideIcon:!0,hideLabel:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,null)),r.a.createElement(ia.a,null,r.a.createElement(ca.a,{component:"th",scope:"row"},r.a.createElement(ba,{hideValue:!0,hideValueDuration:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,null,r.a.createElement(ba,{hideIcon:!0,hideLabel:!0,hideValueDuration:!0,thing:a,thingShadow:this.state.thingShadow})),r.a.createElement(ca.a,{style:{textAlign:"right",paddingRight:0}},r.a.createElement(ba,{hideIcon:!0,hideLabel:!0,hideValue:!0,thing:a,thingShadow:this.state.thingShadow}))))))),!!(a.ain||this.state.thingShadow&&this.state.thingShadow.state.reported.ain)&&r.a.createElement(sa.a,{className:t.panel,elevation:0},r.a.createElement(la.a,{classes:{root:t.panelSummary,content:t.panelSummaryContent},expandIcon:r.a.createElement(da.a,null)},r.a.createElement(de.a,{className:t.panelHeading,variant:"h6"},"\u0410\u043d\u0430\u043b\u043e\u0433\u043e\u0432\u044b\u0435 \u0434\u0430\u0442\u0447\u0438\u043a\u0438")),r.a.createElement(ua.a,{className:t.panelDetails},r.a.createElement(ya,{thing:a,thingShadow:this.state.thingShadow}))),!!(a.owire||this.state.thingShadow&&this.state.thingShadow.state.reported.owire)&&r.a.createElement(sa.a,{className:t.panel,elevation:0},r.a.createElement(la.a,{classes:{root:t.panelSummary,content:t.panelSummaryContent},expandIcon:r.a.createElement(da.a,null)},r.a.createElement(de.a,{className:t.panelHeading,variant:"h6"},"\u0428\u0438\u043d\u0430 1-Wire")),r.a.createElement(ua.a,{className:t.panelDetails},r.a.createElement(ka,{thing:a,thingShadow:this.state.thingShadow,bus:"owire"}))),!!(a.rs485||this.state.thingShadow&&this.state.thingShadow.state.reported.rs485)&&r.a.createElement(sa.a,{className:t.panel,elevation:0},r.a.createElement(la.a,{classes:{root:t.panelSummary,content:t.panelSummaryContent},expandIcon:r.a.createElement(da.a,null)},r.a.createElement(de.a,{className:t.panelHeading,variant:"h6"},"\u0428\u0438\u043d\u0430 RS-485")),r.a.createElement(ua.a,{className:t.panelDetails},r.a.createElement(ka,{thing:a,thingShadow:this.state.thingShadow,bus:"rs485"}))),!!(a.rs232||this.state.thingShadow&&this.state.thingShadow.state.reported.rs232)&&r.a.createElement(sa.a,{className:t.panel,elevation:0},r.a.createElement(la.a,{classes:{root:t.panelSummary,content:t.panelSummaryContent},expandIcon:r.a.createElement(da.a,null)},r.a.createElement(de.a,{className:t.panelHeading,variant:"h6"},"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e RS-232")),r.a.createElement(ua.a,{className:t.panelDetails},r.a.createElement(ka,{thing:a,thingShadow:this.state.thingShadow,bus:"rs232"}))),r.a.createElement(sa.a,{className:t.panel,elevation:0},r.a.createElement(la.a,{classes:{root:t.panelSummary,content:t.panelSummaryContent},expandIcon:r.a.createElement(da.a,null)},r.a.createElement(de.a,{className:t.panelHeading,variant:"h6"},"\u0414\u0438\u0441\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0432\u044b\u0445\u043e\u0434\u044b")),r.a.createElement(ua.a,{className:t.panelDetails},r.a.createElement(Ca,{thing:a,thingShadow:this.state.thingShadow}))),r.a.createElement(sa.a,{className:t.panel,elevation:0},r.a.createElement(la.a,{classes:{root:t.panelSummary,content:t.panelSummaryContent},expandIcon:r.a.createElement(da.a,null)},r.a.createElement(de.a,{className:t.panelHeading,variant:"h6"},"\u0420\u0435\u043b\u0435")),r.a.createElement(ua.a,{className:t.panelDetails},r.a.createElement(Oa,{thing:a,thingShadow:this.state.thingShadow,unsavedRelayState:this.state.unsavedRelayState,onChangeRelay:this.handleChangeRelay})))))):null}}]),t}(r.a.PureComponent),Aa=Object(se.a)(function(e){return{root:{},status:{},panel:{"&.Mui-expanded":{margin:0}},panelSummary:{minHeight:48,padding:0,"&.Mui-expanded":{minHeight:48,margin:0,"& $panelDetailsShort":{display:"none"}}},panelSummaryContent:{minHeight:"auto",margin:0,"&.Mui-expanded":{margin:0}},panelDetails:{padding:0},panelDetailsShort:{display:"flex"},panelHeading:{},list:{margin:e.spacing(-1,-2,2),padding:0},table:{marginTop:e.spacing(0),marginBottom:e.spacing(3),"& thead th":{padding:e.spacing(0,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& tbody th, & tbody td":{padding:e.spacing(1.5,2),lineHeight:"24px","&:first-child":{paddingLeft:0}},"& > tbody > tr:last-child th, & > tbody > tr:last-child td":{borderBottom:0}},icon:{position:"relative",top:-1,marginRight:8,verticalAlign:"middle"},icon_textPrimary:{},icon_textSecondary:{color:e.palette.text.secondary},progress:{position:"absolute",zIndex:100500,top:"50%",left:"50%",marginTop:-20,marginLeft:-20}}})(Na),Ia=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(Aa,this.props)}}]),t}(r.a.PureComponent),La=Object(s.b)(function(e,t){t.thing;return{}},function(e){return{}})(Ia),_a=function(e){function t(){return Object(K.a)(this,t),Object(J.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement(We,{filterComponent:Xe,eventListComponent:it,thingListComponent:Bt,thingDetailsComponent:La})}}]),t}(r.a.Component),Pa=Object(s.b)(function(e){return{}},function(e){return{}})(_a),Ta=function(e){e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),r.a.createElement("p",null,"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435... (\u0441\u0441\u044b\u043b\u043a\u0438)"))};a(1205);function Da(e){return e.debug?r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{to:"/ws",label:"\u0412\u044b\u0431\u043e\u0440 ARM"})):null}var Ra=function(e){e.store;return r.a.createElement("div",{className:"rootDiv"},r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"logo"},r.a.createElement("span",{className:"appName"},"ST-Eye"),r.a.createElement("span",{className:"separator"}),r.a.createElement("span",{className:"pageName"})),r.a.createElement("div",{className:"top-menu"},r.a.createElement(Da,{debug:!0})),r.a.createElement(ce,null)),r.a.createElement(U.d,null,r.a.createElement(U.b,{exact:!0,path:"/",component:te}),r.a.createElement(U.b,{path:"/login",component:te}),r.a.createElement(q,{path:"/analyst",component:je}),r.a.createElement(q,{path:"/dispatch",component:Pa}),r.a.createElement(q,{path:"/ws",component:Ne}),r.a.createElement(U.b,{component:Ta})))},Ha=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ma(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ga=a(422),Va=Object(Ga.a)({palette:{primary:{main:"#3498db"},secondary:{main:"#3f51b5"}}}),Wa=(a(1206),[m.a]);var Fa=Object(l.d)(z,l.a.apply(void 0,Wa));i.a.render(r.a.createElement(s.a,{store:Fa},r.a.createElement(u.a,{theme:Va},r.a.createElement(c.a,null,r.a.createElement(Ra,{store:Fa})))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/st-eye-prod",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/st-eye-prod","/service-worker.js");Ha?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ma(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ma(e)})}}()},222:function(e,t){},434:function(e,t,a){e.exports=a(1207)},837:function(e,t){},839:function(e,t){},883:function(e,t){},884:function(e,t){},949:function(e,t){}},[[434,1,2]]]);
//# sourceMappingURL=main.06b75a1b.chunk.js.map